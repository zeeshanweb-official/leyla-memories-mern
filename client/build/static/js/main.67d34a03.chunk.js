(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(70)},45:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),o=a.n(s),l=a(1),c=a.n(l),i=a(11),m=a(3),u=a(4),d=a(6),p=a(5),h=a(7),v=a(10),f=a(16),y=(a(45),a(24),a(36)),E=a.n(y),b=(a(46),a(9)),g=a.n(b);function w(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/memories");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.a.post("/posts/memories",t).then(function(e){return e}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.a.post("/posts/update",t).then(function(e){return e}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var O=a(17),S=a.n(O),C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).changeHandler=function(e){var t=a.state.memory;t[e.target.name]=e.target.value,a.setState({memory:t})},a.UpdateMemory=function(){(function(e){return k.apply(this,arguments)})(a.state.memory).then(function(e){a.props.updated(),200==e.status?S.a.success("Memory Updated Successfully"):S.a.error("Cannot Update a Memory!!! kindly check your console for more information")})},a.setMemory=function(){a.setState({memory:a.props.memory})},a.dltMemory=function(){(function(e){return j.apply(this,arguments)})(a.props.memory._id).then(function(e){a.props.updated(),200==e.status?S.a.success("Memory Deleted Successfully"):S.a.error("Cannot Delete a Memory!!! kindly check your console for more information")})},a.state={id:0,success:!1,memory:{title:"",body:""}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({id:this.props.id});E.a.Modal.init(this.Modal,{inDuration:250,outDuration:250,opacity:.5,dismissible:!1})}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.id!==this.state.id&&this.setState({id:this.props.id});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col m3 s12 memoryCard",onClick:this.props.clickFunction},r.a.createElement("div",{className:"card darken-1 center-align"},r.a.createElement("div",{className:"card-body "},r.a.createElement("h2",null,this.props.title),r.a.createElement("p",null,this.props.body)),r.a.createElement("div",{className:"card-action"},r.a.createElement("div",{className:"row mb0"},r.a.createElement("div",{className:"col m6"},r.a.createElement("a",{className:"btn modal-trigger","data-target":"modal1"+this.props.id,onClick:this.setMemory},r.a.createElement("i",{className:"material-icons"},"edit")),r.a.createElement("div",{ref:function(t){e.Modal=t},id:"modal1"+this.props.id,className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h4",null,"Update Memory"),r.a.createElement("form",{onSubmit:this.UpdateMemory},r.a.createElement("label",null,"Memory Title"),r.a.createElement("input",{type:"text",name:"title",value:this.state.memory?this.state.memory.title:"",onChange:this.changeHandler,placeholder:"Give your memory a name"}),r.a.createElement("label",null," Memory Description"),r.a.createElement("input",{type:"text",name:"body",value:this.state.memory?this.state.memory.body:"",onChange:this.changeHandler,placeholder:"Describe your memory"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{className:"modal-close waves-effect waves-red red btn-flat",onClick:this.Dismentle},"Cancel"),r.a.createElement("a",{className:"modal-close waves-effect waves-green green btn-flat",onClick:this.UpdateMemory},"Update")))),r.a.createElement("div",{className:"col m6"},r.a.createElement("a",{className:"btn",onClick:this.dltMemory},r.a.createElement("i",{className:"material-icons"},"delete")))))))}}]),t}(r.a.Component),M=a(15),_=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updated=function(){a.componentDidMount()},a.state={memories:[],loading:!0,firstLoad:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Home",e.next=3,w();case 3:t=e.sent,this.setState({memories:t,loading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"memoryList"},r.a.createElement("h1",null,"My memories"),r.a.createElement("div",{className:"row"},this.state.memories.map(function(t){var a;return r.a.createElement(C,(a={id:t.id,key:t._id,title:t.title,body:t.body},Object(M.a)(a,"id",t._id),Object(M.a)(a,"memory",t),Object(M.a)(a,"updated",e.updated),a))})))}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).changeHandler=function(e){var t=a.state.content;t[e.target.name]=e.target.value,a.setState({content:t})},a.addMemory=function(e){e.preventDefault(),function(e){return N.apply(this,arguments)}(a.state.content).then(function(e){e.data&&(e.data._id?(S.a.success("Memory Added Successfully"),a.props.history.push("/memories")):S.a.error("Cannot add a Memory!!! kindly check your console for more information"))})},a.componentDidMount=function(){document.title="Add a memory"},a.state={content:{title:"",body:" "}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"addMemory"},r.a.createElement("h1",null," Add a new memory "),r.a.createElement("form",{onSubmit:this.addMemory},r.a.createElement("label",null,"Memory Title"),r.a.createElement("input",{type:"text",name:"title",onChange:this.changeHandler,placeholder:"Give your memory a name"}),r.a.createElement("label",null," Memory Description"),r.a.createElement("input",{type:"text",name:"body",onChange:this.changeHandler,placeholder:"Describe your memory"}),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))))}}]),t}(r.a.Component),q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){localStorage.clear(),a.props.history.push("/login")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-wrapper indigo"},r.a.createElement("div",{className:"container"},r.a.createElement(v.b,{to:"/",className:"brand-logo fontWeight"},"Memory Journal"),null!=localStorage.getItem("token")?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-small-and-down"},r.a.createElement("li",null,r.a.createElement(v.b,{to:"/memories"},"My Memories")),r.a.createElement("li",null,r.a.createElement(v.b,{to:"/add"},"Add a Memory")),r.a.createElement("li",null,r.a.createElement(v.b,{to:"/quote"},"Quote")),r.a.createElement("li",null,r.a.createElement(v.c,{to:"/login"},r.a.createElement("i",{className:"material-icons",onClick:this.logout},"power_settings_new")))):null))}}]),t}(n.Component),A=Object(f.f)(q),U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",token:"",vusername:!1,vusernametext:"",vpassword:!1,vpasswordtext:"",vauthenticate:!1,vauthenticatetext:""},a.handleChange=function(e){a.setState(Object(M.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.username,password:a.state.password};a.setState({vusername:!1,vusernametext:"",vpassword:!1,vpasswordtext:"",vauthenticate:!1,vauthenticatetext:""}),g.a.post("/users/login",t).then(function(e){a.setState({token:e.data.token}),localStorage.setItem("token",a.state.token),a.props.history.push("/memories")}).catch(function(e){try{e.response.data.username&&a.setState({vusername:!0,vusernametext:e.response.data.username[0]}),e.response.data.password&&a.setState({vpassword:!0,vpasswordtext:e.response.data.password[0]}),e.response.data.non_field_errors&&a.setState({vauthenticate:!0,vauthenticatetext:e.response.data.non_field_errors[0]})}catch(e){console.log(e.response)}})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")&&this.props.history.push("/memories")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h3",{className:"grey-text darken-4 center"},"Welcome to the Memory Journal"),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("h4",{className:"indigo-text darken-4"},"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"material-icons prefix"},"account_circle"),r.a.createElement("input",{id:"username",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("span",{className:"red-text helper-text",id:"vusername"},this.state.vusername?this.state.vusernametext:"")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"material-icons prefix"},"lock"),r.a.createElement("input",{id:"password",type:"password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("span",{className:"red-text helper-text",id:"vpassword"},this.state.vpassword?this.state.vpasswordtext:"")),r.a.createElement("p",{className:"red-text"},this.state.vauthenticate?this.state.vauthenticatetext:""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"waves-effect waves-light btn white-text blue darken-4 pull",type:"submit"},"Submit")),r.a.createElement(v.b,{to:"/signup",className:""},"create new account")))))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",email:"",username:"",password:"",gender:"",vfname:!1,vfnametext:"",vlname:!1,vlnametext:"",vusername:!1,vusernametext:"",vemail:!1,vemailtext:"",vpassword:!1,vpasswordtext:""},a.handleChange=function(e){a.setState(Object(M.a)({},e.target.id,e.target.value))},a.handleRadioChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.id))},a.handleSubmit=function(e){e.preventDefault();var t={firstname:a.state.first_name,lastname:a.state.last_name,email:a.state.email,username:a.state.username,password:a.state.password,gender:a.state.gender};a.setState({vfname:!1,vfnametext:"",vlname:!1,vlnametext:"",vusername:!1,vusernametext:"",vemail:!1,vemailtext:"",vpassword:!1,vpasswordtext:""}),g.a.post("/users/signup",t).then(function(e){console.log(e),a.props.history.push("/login")}).catch(function(e){try{e.response.data.first_name&&a.setState({vfname:!0,vfnametext:e.response.data.first_name[0]}),e.response.data.last_name&&a.setState({vlname:!0,vlnametext:e.response.data.last_name[0]}),e.response.data.username&&a.setState({vusername:!0,vusernametext:e.response.data.username[0]}),e.response.data.email&&a.setState({vemail:!0,vemailtext:e.response.data.email[0]}),e.response.data.password&&a.setState({vpassword:!0,vpasswordtext:e.response.data.password[0]})}catch(e){console.log(e.response)}})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")&&this.props.history.push("/memories")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h3",{className:"indigo-text darken-4 center-text"},"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("input",{id:"first_name",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"first_name"},"First Name:"),r.a.createElement("span",{className:"red-text helper-text",id:"vfname"},this.state.vfname?this.state.vfnametext:"")),r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("input",{id:"last_name",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"last_name"},"Last Name:"),r.a.createElement("span",{className:"red-text helper-text",id:"vfname"},this.state.vlname?this.state.vlnametext:"")),r.a.createElement("div",{className:"input-field col s2"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{id:"male",className:"with-gap",name:"gender",value:"male",type:"radio",onChange:this.handleRadioChange}),r.a.createElement("span",null,"Male")))),r.a.createElement("div",{className:"input-field col s2"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{id:"female",className:"with-gap",name:"gender",value:"female",type:"radio",onChange:this.handleRadioChange}),r.a.createElement("span",null,"Female"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"username",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("span",{className:"red-text helper-text",id:"vusername"},this.state.vusername?this.state.vusernametext:"")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"email",type:"email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("span",{className:"red-text helper-text",id:"vemail"},this.state.vemail?this.state.vemailtext:"")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"password",type:"password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("span",{className:"red-text helper-text",id:"vpassword"},this.state.vpassword?this.state.vpasswordtext:"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"waves-effect waves-light btn white-text blue darken-4",type:"submit"},"Submit"))))))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={quote:{}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.verifyToken(),this.getQuote()}},{key:"verifyToken",value:function(){var e=this,t={token:localStorage.getItem("token")};null==localStorage.getItem("token")?this.props.history.push("/login"):null!=localStorage.getItem("token")&&g.a.post("http://localhost:5000/auth-jwt-verify/",t).then(function(e){console.log("token verify",e)}).catch(function(t){console.log("token verify error",t),localStorage.clear(),e.props.history.push("/login")})}},{key:"getQuote",value:function(){var e=this;g.a.get("https://quotes.rest/qod",{headers:{Accept:"application/json"}}).then(function(t){console.log(t.data),e.setState({quote:t.data.contents.quotes[0]})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state.quote?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("h4",{className:"card-title"},this.state.quote.title),r.a.createElement("hr",null),r.a.createElement("p",{className:"flow-text quote"},this.state.quote.quote),r.a.createElement("br",null),r.a.createElement("h5",{className:"yellow-text"},"- ",this.state.quote.author))))):r.a.createElement("div",{className:"center mt-5 white-text"},"Loading quote...");return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("br",null),r.a.createElement("h3",{className:"black-text accent-4s"},"Quote of the Day"))),e)}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={memories:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Home",e.next=3,w();case 3:t=e.sent,this.setState({memories:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(f.c,null," ",r.a.createElement(f.a,{exact:!0,path:"/",component:U}),r.a.createElement(f.a,{path:"/login",component:U}),r.a.createElement(f.a,{path:"/signup",component:F}),r.a.createElement(f.a,{path:"/quote",component:I}),r.a.createElement(f.a,{path:"/add",component:D}),r.a.createElement(f.a,{path:"/memories",component:_}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.interceptors.response.use(function(e){return e},function(e){try{"Signature has expired."!==e.response.data.detail&&"Error decoding signature."!==e.response.data.detail&&"Invalid Authorization header. Credentials string should not contain spaces."!==e.response.data.detail&&"Error decoding signature."!==e.response.non_field_errors||(localStorage.clear(),window.location.reload())}catch(e){console.log(e)}return Promise.reject(e)}),o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.67d34a03.chunk.js.map